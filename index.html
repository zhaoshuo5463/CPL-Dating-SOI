<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Find A Discreet Hookup!</title>
<meta name="description" content="Find A Discreet Hookup">

<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/css.css">

<style>
body { font-family: Arial, sans-serif; margin:0; }
.hero {
  background-image:url("images/AM_Affiliate_DarkBG.jpg");
  background-size:cover;
  background-position:center;
  padding:60px 20px;
  color:#fff;
}
.btn-gradient{
  background:linear-gradient(45deg,#0ecae6,#5757ff,#fc449b,#ff8687);
  border:none;
  border-radius:40px;
  padding:14px 40px;
  color:#fff;
  font-size:22px;
  cursor:pointer;
}
input[type=email]{
  width:100%;
  max-width:360px;
  padding:14px 20px;
  border-radius:30px;
  border:1px solid #ccc;
  margin-bottom:15px;
  font-size:18px;
}
.center{text-align:center;}
.mobile{display:none;}
@media(max-width:768px){
  .mobile{display:block;}
  .desktop{display:none;}
  .hero{padding:40px 15px;}
}
</style>

<!-- ======================
     配置区（只动这里）
====================== -->
<script>
/* 1️⃣ 是否启用 Bigo Pixel */
var ENABLE_BIGOPIXEL = false;

/* 2️⃣ Bigo Pixel ID（后台复制） */
var BIGO_PIXEL_ID = "YOUR_PIXEL_ID";

/* 3️⃣ Offer 链接（自动拼 click_id） */
var OFFER_BASE_URL =
  "https://flowbox.hotrk0.com/offer?offer_id=128524&aff_id=295&aff_pub=[source]&advertising_id=[advertising_id]&idfa=[idfa]";
</script>

<!-- ======================
     Bigo Pixel 基础代码（预埋）
====================== -->
<script>
(function(){
  if(!ENABLE_BIGOPIXEL) return;

  !function (w, d, t) {
    w.BigoAnalyticsObject = t;
    var fn = w[t] = w[t] || function () {
      (w[t].q = w[t].q || []).push(arguments)
    };
    var s = d.createElement('script');
    s.async = 1;
    s.src = 'https://analytics.adsbigo.com/pixel/sdk.js';
    var x = d.getElementsByTagName('script')[0];
    x.parentNode.insertBefore(s, x);
  }(window, document, 'bigo');

  bigo('init', BIGO_PIXEL_ID);
})();
</script>

</head>

<body>

<!-- DESKTOP -->
<section class="hero center desktop">
  <img src="images/ashley-logo-wt.png" style="max-width:280px;margin-bottom:30px;">
  <h1>Find A Discreet Hookup!</h1>
  <p>Join millions of people exploring like-minded, discreet dating.</p>

  <form onsubmit="return handleCPLSubmit(this);">
    <input type="email" name="email" placeholder="Enter your email" required>
    <button type="submit" class="btn-gradient">Join Free</button>
  </form>
</section>

<!-- MOBILE -->
<section class="hero center mobile">
  <img src="images/ashley-logo-wt.png" style="max-width:220px;margin-bottom:20px;">
  <h2>Find A Discreet Hookup!</h2>
  <p>Discreet dating starts here.</p>

  <form onsubmit="return handleCPLSubmit(this);">
    <input type="email" name="email" placeholder="Enter your email" required>
    <button type="submit" class="btn-gradient">Join Free</button>
  </form>
</section>

<footer class="center" style="padding:30px 15px;font-size:12px;color:#666;">
  <img src="images/ashley-logo-bk.png" style="max-width:200px;margin-bottom:15px;">
  <p>© 2001–2018 Ruby Life Inc.</p>
</footer>

<!-- ======================
     CPL / ClickID / 防重复逻辑
====================== -->
<script>
/* 读取 URL 参数 */
function getParam(name){
  var match = new RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
  return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

/* 获取 Bigo click_id */
var CLICK_ID = getParam("click_id") || "";

/* 防重复：本地已提交标记 */
var CPL_LOCK_KEY = "cpl_submitted";

function handleCPLSubmit(form){
  /* 防止重复提交 */
  if(localStorage.getItem(CPL_LOCK_KEY)){
    alert("Submission already received.");
    return false;
  }

  var emailInput = form.querySelector("input[type='email']");
  if(!emailInput || !emailInput.value.trim()){
    alert("Please enter a valid email address.");
    return false;
  }

  /* 锁定本次提交 */
  localStorage.setItem(CPL_LOCK_KEY, "1");

  /* 触发 Bigo Pixel（仅一次） */
  if(ENABLE_BIGOPIXEL && typeof bigo === "function"){
    bigo('track', 'CompleteRegistration');
  }

  /* 拼接最终 Offer URL */
  var finalUrl = OFFER_BASE_URL;
  if(CLICK_ID){
    finalUrl += "&aff_sub=" + encodeURIComponent(CLICK_ID);
  }

  /* 延迟跳转（保证 CPL 记录） */
  setTimeout(function(){
    window.location.href = finalUrl;
  }, 800);

  return false;
}
</script>

</body>
</html>
